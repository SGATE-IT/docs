# Query Transaction

## Function Description

- Query the transaction details of payment orders in the payment system

## Query Transaction API

### Request URL

- `/transactions/{TRANSACTION_ID}/merchant`
  - `{TRANSACTION_ID}`ï¼šYour Transaction ID

### Request Method

- `transaction.detailForMerchant`

### HTTP Verb

- GET

### Request Parameters

The request parameters are as follows:

- **Header**

  - [_View public parameters_](/en/payinApi/callMethod/callMethod#public-parameters)

### Response Parameters

The response parameters are as follows:

- **Response Body**

| **Parameter**          | **Type** | **Description**                                                                                 | **Example**                                                                                                             |
| ---------------------- | -------- | ----------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| id                     | string   | The transaction ID of the order, automatically generated by the system, globally unique         | "M000001T2022101023455774363043_1"                                                                                      |
| clientId               | string   | ID of the Client through which the order was created                                            | "CLT0000001"                                                                                                            |
| orderId                | string   | Merchant ID to which the order belongs                                                          | "M000001T2022101023455774363043"                                                                                        |
| merchantId             | string   | Merchant ID                                                                                     | "M000001"                                                                                                               |
| amount                 | number   | Order amount, note that this is a numeric type, floating point number, up to two decimal places | 3.23                                                                                                                    |
| currency               | string   | Currency type Currency type, three uppercase letters                                            | "SAR", "AED", "BHD", "EGP", "KWD", "OMR", "QAR"                                                                         |
| deviceId               | string   | The device ID of the paying user                                                                | "a13382f5-4dcf-4ef5-9e81-33a836a610a9"                                                                                  |
| clientIp               | string   | The IP of the paying user                                                                       | "192.168.0.1"                                                                                                           |
| userAgent              | string   | The paying user's UserAgent                                                                     | "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/118.0.0.0 Safari/537.36" |
| result                 | string   | Transaction result                                                                              |                                                                                                                         |
| completedAt            | string   | Transaction completion time                                                                     | "2022-12-31T12:53:17.000Z"                                                                                              |
| type                   | string   | transaction type                                                                                | "payment" payment<br>"refund" refund                                                                                    |
| paymentMethod          | string   | transaction method                                                                              |                                                                                                                         |
| payerDigest            | string   | Transactor data                                                                                 | '{"nameOnCard":"MasterCard SandBox","number":"512345xxxxxx0008"}'                                                       |
| successfullyNotifiedAt | string   | Notification callback success time                                                              | "2022-12-31T12:53:17.000Z"                                                                                              |
| notificationTimes      | number   | number of notifications                                                                         | 1                                                                                                                       |
| lastNotifiedAt         | string   | Last notification time                                                                          | "2022-12-31T12:53:17.000Z"                                                                                              |
| channelOrderResult     | string   | Payment gateway response result                                                                 | "{}"                                                                                                                    |
| createdAt              | string   | Creation time                                                                                   | "2022-10-22T12:00:21.000Z"                                                                                              |
| updatedAt              | string   | Update time                                                                                     | "2022-12-31T12:53:17.000Z"                                                                                              |

**Response Parameter Example**

```json
{
    "amount":0.12,
    "channelFee":0,
    "agencyFee":0,
    "merchantFee":0,
    "id":"M424843T2023111313380659443799_1",
    "orderId":"M424843T2023111313380659443799",
    "channelId":"C231656",
    "clientId":"CLT8083667",
    "agencyId":"A158770",
    "merchantId":"M424843",
    "feeId":"F02701120",
    "productId":"P520636",
    "deviceId":"a13382f5-4dcf-4ef5-9e81-33a836a610a9",
    "clientIp":"124.126.202.12",
    "userAgent":"Mozilla\/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/119.0.0.0 Safari\/537.36",
    "result":"Approved",
    "completedAt":"2023-11-13T10:39:51.000Z",
    "type":"payment",
    "paymentMethod":"stcpay",
    "currency":"SAR",
    "channelFeeSnapId":"FS83453",
    "agencyFeeSnapId":"FS47115",
    "merchantFeeSnapId":"FS2551345",
    "cleared":"no",
    "status":"initial",
    "payerDigest":"{\"mobile\":\"******0713\"}",
    "successfullyNotifiedAt":null,
    "notificationTimes":105,
    "lastNotifiedAt":"2023-11-14T14:23:11.000Z",
    "statementId":null,
    "clearanceId":null,
    "createdAt":"2023-11-13T10:39:40.000Z",
    "updatedAt":"2023-11-14T14:23:11.000Z",
    "channelOrderResult":{
        "MerchantID":"72002035477",
        "BranchID":"none",
        "TellerID":"none",
        "RefNum":"M424843T2023111313380659443799",
        "STCPayRefNum":"FT23317FWXPZ",
        "TokenId":"525051493906926355088",
        "Amount":0.12,
        "PaymentDate":"2023-11-13T13:39:40.13",
        "PaymentStatus":2,
        "PaymentStatusDesc":"Paid"
    }
}
```